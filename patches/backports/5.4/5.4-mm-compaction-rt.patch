--- ./mm/compaction.c	2021-07-12 02:41:49.243083417 -0700
+++ ./mm/compaction.c	2021-07-12 02:45:38.804943390 -0700
@@ -1591,7 +1591,11 @@
  * Allow userspace to control policy on scanning the unevictable LRU for
  * compactable pages.
  */
+#ifdef CONFIG_PREEMPT_RT
 int sysctl_compact_unevictable_allowed __read_mostly = 0;
+#else
+int sysctl_compact_unevictable_allowed __read_mostly = 1;
+#endif
 
 static inline void
 update_fast_start_pfn(struct compact_control *cc, unsigned long pfn)
